# User Guide

## Workflows

## View and Run Kani harnesses

### View Kani harnesses

As soon as the Rust file containing the harnesses is opened using the Kani extension in a VSCode instance, you should see the Kani harnesses loaded as regular unit tests in the Testing Panel on the left border of VSCode.
This is how the testing page looks like when you click on the panel.

![Verify Proofs](../resources/screenshots/first.png)

### Running harnesses

You can then run your harnesses using the test tree by clicking the play button beside the harness that was automatically picked up by the Kani VSCode Extension.
Once you run the harness using the extension, you are shown an error message if the verification has failed.
You are then presented with two buttons, to generate the full report for the harness or to run concrete playback to generate unit tests with the counter examples loaded.

![Image: run harness.gif](../resources/screenshots/run-proof.gif)


## Use Concrete Playback to debug Kani harness

### Generate Counter Example unit test

You can generate the unit test with the counter examples by clicking on the **`Run Concrete Playback for (your harness name)`** Button that appears through a blue link on the error banner.

![Image: generate counter example.gif](../resources/screenshots/generate-counter-example.gif)

You can see that the source is annotated with two buttons that hover over the unit test generated called â†’ `Run Test (Kani) | Debug Test (Kani)` which allow you to run and debug the test just like any other Rust unit test.

### Running Kani-generated test

Clicking the unit test using the `Run Test (Kani)` button, runs the unit test generated by concrete playback.

![Run Concrete Test](../resources/screenshots/third.png)

### Debug Kani unit test

By setting breakpoints and clicking the `Debug Test (Kani)` button, you are taken into the debugger panel which allows you to peer into the counter examples or values for which the assert fails.

![Image: show debugging.gif](../resources/screenshots/show-debugging.gif)


(**NOTE TO READER -** Try reloading page to view the gif).


You can then use the debugger controller to step through, into, out of, replay and also change values on the trace panel on the left for interactive debugging.


## View Trace Report

### Generate HTML report

By clicking the `Generate report for (your harness)` button in the error message, you can view the trace for the harness in a rendered HTML report.

![Generate Report](../resources/screenshots/generate-report.png)

### View Report in-window

You can click on the `Preview in Editor` to view the HTML trace within vscode. It should look like this -

![Generate Report](../resources/screenshots/view-report.png)


## Kani Output logging

### View full Kani Log

For every test run, you can view full output from kani logged into the output channel as a text file. To view the log, open the output channel, and click on the channels drop down list to view a channel called `Output (Kani): ...`

![Generate Report](../resources/screenshots/view-output.png)
